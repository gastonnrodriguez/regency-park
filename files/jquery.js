!function($){var _elementos,_opciones,_entrada,_salida,_noches="#noches",_submit_button;$.fn.bc_motorform=function(opciones,args){if(_elementos=this,_entrada=$(_elementos).find(".entrada"),_salida=$(_elementos).find(".salida"),_submit_button=$(_elementos).find("button"),"string"==typeof opciones)return eval(opciones)(args);function init(){$(_entrada).find("input").attr("readonly","readonly"),$(_salida).find("input").attr("readonly","readonly"),fechas2txt(_entrada),fechas2txt(_salida),codpromo(),cambio_noches(),calendarios(),actualiza_noches()}function fechas2txt(capa){var f=str2date($(capa).find("input").val()),dia=_zero_delante(f.getDate()),msa=_opciones.meses.split("@")[f.getMonth()]+" "+f.getFullYear();_opciones.class_fechas_txt?$(capa).find("."+_opciones.class_fechas_txt).text(dia+" "+msa):($(capa).find("span b, span strong").text(dia),$(capa).find("span i, span em").text(msa))}function str2date(f){var fs=f.split("/"),d=parseInt(fs[0],10),m=parseInt(fs[1],10),y=parseInt(fs[2],10);return new Date(y,m-1,d)}function codpromo(){$(_elementos).find(".cprom a").click(function(){$(this).parent().fadeOut(100),$(this).parent().next().delay(300).fadeIn(200).find("input").focus()}),$(".cprom input").val()&&$(".cprom a").trigger("click")}function _get_fecha_actual_hotel(){var ahora=new Date,offset=6e4*ahora.getTimezoneOffset();return new Date(ahora.getTime()+offset+_opciones.offset_zona_horaria)}function calendarios(){var entr=$(_entrada).find("input"),sal=$(_salida).find("input"),fecha_min=new Date;if(_opciones.entrada_min){dateText=_opciones.entrada_min.split("/");var fecha_ent=new Date(dateText[2],dateText[1]-1,dateText[0]);if(fecha_min.getTime()<fecha_ent.getTime())fecha_min=fecha_ent}"offset_zona_horaria"in _opciones&&(fecha_min=_get_fecha_actual_hotel()),$(entr).datepicker({dateFormat:"dd/mm/yy",minDate:new Date(fecha_min),firstDay:1,showAnim:"slideDown",onSelect:function(dateText,inst){dateText=dateText.split("/");var entrada=new Date(dateText[2],dateText[1]-1,dateText[0]),salida=$(sal).datepicker("getDate");if($(sal).datepicker("option","minDate",_sumar_noches($(entr).datepicker("getDate"),1)),salida<=entrada){var manana=_sumar_noches(entrada,1);$(sal).val(_formatear_fecha(manana)),fechas2txt(_entrada),fechas2txt(_salida)}else fechas2txt(_entrada);actualiza_noches(entrada,salida)},onClose:function(){setTimeout(function(){$(sal).datepicker("show")},0)}}),$(sal).datepicker({dateFormat:"dd/mm/yy",firstDay:1,showAnim:"slideDown",onSelect:function(dateText,inst){var entrada=$(entr).datepicker("getDate");dateText=dateText.split("/");var salida=new Date(dateText[2],dateText[1]-1,dateText[0]);if(salida<=entrada){var manana=_sumar_noches(entrada,1);$(sal).datepicker("option","minDate",_formatear_fecha(manana)),$(sal).val(_formatear_fecha(manana)),fechas2txt(_entrada),fechas2txt(_salida)}else fechas2txt(_salida),$(_elementos).find("button").fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300);actualiza_noches(entrada,salida),toggle_button()}}),$(sal).datepicker("option","minDate",_sumar_noches(fecha_min,1));var klass=_opciones.class_fechas_txt?"."+_opciones.class_fechas_txt:"span";$(_entrada).find(klass).click(function(){$(entr).datepicker("show")}),$(_salida).find(klass).click(function(){$(sal).datepicker("show")})}function actualiza_noches(entrada,salida){var ts_entrada=$(_entrada).find("input").datepicker("getDate").valueOf(),noches=($(_salida).find("input").datepicker("getDate").valueOf()-ts_entrada)/864e5;$(_noches).val(Math.round(noches))}function refrescar_noches(){var num_noches=parseInt($(_noches).val(),10);0!=num_noches&&num_noches||(num_noches=1);var fecha_salida=_sumar_noches($(_entrada).find("input").datepicker("getDate"),num_noches);$(_salida).find("input").val(_formatear_fecha(fecha_salida)),fechas2txt(_salida)}function cambio_noches(){$(_noches).keyup(function(event){if(8!=event.which&&0!=event.which&&(event.which<48||57<event.which)&&(57<event.which&&event.which<96||105<event.which))return $(_noches).val($(_noches).val().replace(/[^0-9]/g,"")),!1;8==event.which&&($(_noches).val()||($(_noches).val(1),$(_noches).text(1))),refrescar_noches()}),$(_noches).change(function(){refrescar_noches();var num_noches=parseInt($(_noches).val(),10);0!=num_noches&&num_noches||(num_noches=1,$(_noches).val(num_noches)),num_noches<1&&(num_noches=1),toggle_button()})}function toggle_button(){$(_submit_button).fadeOut(300).fadeIn(300).fadeOut(300).fadeIn(300)}function _sumar_noches(fecha,noches){for(var cont=1;cont<=noches&&cont<365;)fecha.setTime(fecha.getTime()+864e5),1==fecha.getHours()?fecha.setTime(fecha.getTime()-36e5):23==fecha.getHours()&&fecha.setTime(fecha.getTime()+36e5),cont++;return fecha}function _formatear_fecha(fecha){return _zero_delante(fecha.getDate())+"/"+_zero_delante(fecha.getMonth()+1)+"/"+fecha.getFullYear()}function _zero_delante(valor){var cadena=new String(valor);return 1==cadena.length?"0"+cadena:cadena}function buscar_en_fecha(opciones){var entr=$(_entrada).find("input"),sal=$(_salida).find("input"),action=$(_elementos).attr("action");opciones.cod_oferta&&(separador=-1<action.indexOf("?")?"&":"?",action+=separador+"co="+opciones.cod_oferta),opciones.codpromo&&(action+="&cp="+opciones.codpromo,$("#id_codpromo").val(opciones.codpromo)),$(_elementos).attr({action:action}),$(entr).val(opciones.entrada),$(sal).val(opciones.salida),$(_elementos).submit()}_opciones_default={class_fechas_txt:""},_opciones=jQuery.extend(_opciones_default,opciones),init()}}(jQuery),jQuery.fn.centrar=function(){$(window).height(),this.outerHeight(),$(window).scrollTop();var left=($(window).width()-this.outerWidth())/2+$(window).scrollLeft()+"px";return this.css("top","300px"),this.css("left",left),this},function($){var _elementos,_opciones,_fondo,_wnd_fechas,_entrada,_salida;$.fn.bc_ofertas=function(opciones,args){if(_elementos=this,"string"==typeof opciones)return eval(opciones)(args);function init(){$.map(_elementos,function(boton){$(boton).click(function(){fondo(),mostrar_ventan(boton),calendarios(boton)})})}function fondo(){_fondo=$("<div/>").attr("id",_opciones.id_fondo).css({opacity:_opciones.opacidad_fondo,height:$(document).height()}).appendTo("body").click(function(){$(this).remove(),$(_wnd_fechas).remove()})}function mostrar_ventan(boton){_wnd_fechas=$("<div/>").attr("id",_opciones.id_fechas).appendTo("body").centrar(),$("<div/>").attr("class",_opciones.class_titulo).html($(boton).data("oferta")).appendTo(_wnd_fechas),$("<div/>").attr("class",_opciones.class_cerrar).text("[X]").appendTo(_wnd_fechas).click(function(){$(_wnd_fechas).remove(),$(_fondo).remove()}),$("<span/>").attr("class",_opciones.class_entrada_txt).text(_opciones.entrada).appendTo(_wnd_fechas),$("<span/>").attr("class",_opciones.class_salida_txt).text(_opciones.salida).appendTo(_wnd_fechas),_entrada=$("<input/>").attr({class:_opciones.class_entrada_input,type:"text",readonly:"readonly"}).appendTo(_wnd_fechas),_salida=$("<input/>").attr({class:_opciones.class_salida_input,type:"text",readonly:"readonly"}).appendTo(_wnd_fechas),$("<button/>").attr("class",_opciones.class_button).text(_opciones.buscar).appendTo(_wnd_fechas).click(function(){var entrada=$(_entrada).val(),salida=$(_salida).val(),cod_oferta=$(boton).data("codigo");if($(boton).data("paquete")){var fe=str2date(entrada),fs=str2date(salida),fecha_e=fe.getFullYear()+"-"+("0"+(fe.getMonth()+1)).slice(-2)+"-"+("0"+fe.getDate()).slice(-2),fecha_s=fs.getFullYear()+"-"+("0"+(fs.getMonth()+1)).slice(-2)+"-"+("0"+fs.getDate()).slice(-2),url_paquete=$(boton).data("url")+"&fe="+fecha_e+"&fs="+fecha_s;window.location.replace(url_paquete)}else""!==entrada&&""!==salida&&$("#"+_opciones.id_form).bc_motorform("buscar_en_fecha",{entrada:entrada,salida:salida,cod_oferta:cod_oferta})})}function calendarios(boton){var minimo_noches=$(boton).data("minimo-noches");null!=minimo_noches&&""!=minimo_noches||(minimo_noches=1);var lastminute=$(boton).data("lastminute"),mindate=$(boton).data("desde");if(lastminute)var maxdate=mindate;else maxdate=$(boton).data("hasta");var new_date=mindate.split("/");mindate=new Date(new_date[2],new_date[1]-1,new_date[0]);if(_opciones.entrada_min){dateText=_opciones.entrada_min.split("/");var fecha_ent=new Date(dateText[2],dateText[1]-1,dateText[0]);if(mindate.getTime()<fecha_ent.getTime())mindate=fecha_ent}$(_wnd_fechas).find("."+_opciones.class_entrada_input).datepicker({dateFormat:"dd/mm/yy",firstDay:1,minDate:mindate,maxDate:maxdate,onSelect:function(dateText,inst){$(_wnd_fechas).find("."+_opciones.class_salida_input).datepicker("option","minDate",sumar_noches($(this).datepicker("getDate"),minimo_noches))}}),$(_wnd_fechas).find("."+_opciones.class_salida_input).datepicker({dateFormat:"dd/mm/yy",firstDay:1,minDate:mindate,maxDate:$(boton).data("hasta")});var desde=str2date($(boton).data("desde"));$(_wnd_fechas).find("."+_opciones.class_entrada_input).datepicker("setDate",desde);var hasta=sumar_noches(str2date($(boton).data("desde")),minimo_noches);$(_wnd_fechas).find("."+_opciones.class_salida_input).datepicker("setDate",hasta)}function str2date(f){var fs=f.split("/");return new Date(parseInt(fs[2],10),parseInt(fs[1],10)-1,parseInt(fs[0],10))}function sumar_noches(fecha,noches){for(var cont=1;cont<=noches&&cont<365;)fecha.setTime(fecha.getTime()+864e5),1==fecha.getHours()?fecha.setTime(fecha.getTime()-36e5):23==fecha.getHours()&&fecha.setTime(fecha.getTime()+36e5),cont++;return fecha}_opciones_default={id_form:"bcmotor",opacidad_fondo:.8,id_fondo:"ofertafondo",id_fechas:"ofertafechas",class_titulo:"titulo",class_cerrar:"cerrar",class_entrada_txt:"entrada",class_salida_txt:"salida",class_entrada_input:"entrada_input",class_salida_input:"salida_input"},_opciones=jQuery.extend(_opciones_default,opciones),init()}}(jQuery),function($){var _elementos,_opciones,_fondo,_entrada,_salida,_modal_fechas;$.fn.bc_ofertas_modal=function(opciones,args){if(_elementos=this,"string"==typeof opciones)return eval(opciones)(args);var _opciones_default={id_modal:"modal_ofertafechas",id_form:"bcmotor",id_fechas:"ofertafechas",class_titulo:"titulo",class_entrada_txt:"Entrada",class_salida_txt:"Salida",class_entrada_input:"entrada_input",class_salida_input:"salida_input",class_codpromo_input:"input-codpromo-modal",btnDispo:"Consultar Disponibilidad",pSalida:"Salida",pEntrada:"Entrada"};function init(){$.map(_elementos,function(boton){$(boton).click(function(e){e.preventDefault();var codOferta=$(this).data("codigo"),nomOferta=$(this).data("oferta"),codHotel=$(this).data("hotel-cod"),nomHotel=$(this).data("hotel");crear_modal(nomOferta,nomHotel,_opciones.buscar,_opciones.salida,_opciones.entrada,_opciones.codpromo,_opciones.codpromo_txt),mostrar_ventan(boton,codOferta,codHotel,nomHotel),calendarios(boton)})})}function crear_modal(nombreOferta,nombreHotel,btnDispo,pSalida,pEntrada,codpromo,codpromo_txt){$(".modal-dialog").each(function(){$(this).find("#ofertafechass").length&&$(this).remove()});var _contentOfertas='<div class="modal-dialog">    <div class="modal-content">        <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>            <span class="hotel_nombre">'+nombreHotel+'</span>            <h4 class="modal-title titulo">'+nombreOferta+'</h4>        </div>        <div class="modal-body">            <div id="ofertafechass" class="clearfix">';_contentOfertas+=codpromo?'                <div class="col-lg-3 col-sm-6 col-xs-12 checkin">':'                <div class="col-lg-4 col-sm-6 col-xs-12 checkin">',_contentOfertas+="                    <label>"+pEntrada+'</label>                    <div class="input-group">                        <input type="text" id="oferta_entrada" class="form-control entrada_input" placeholder="'+pEntrada+'" readonly>                        <label class="input-group-addon btn" for="oferta_entrada" ><i class="fa fa-calendar"></i></label>                    </div>                </div>',_contentOfertas+=codpromo?'                <div class="col-lg-3 col-sm-6 col-xs-12 checkout">':'                <div class="col-lg-4 col-sm-6 col-xs-12 checkout">',_contentOfertas+="                    <label>"+pSalida+'</label>                    <div class="input-group">                        <input type="text" id="oferta_salida" class="form-control salida_input" placeholder="'+pSalida+'" readonly>                        <label class="input-group-addon btn" for="oferta_salida" ><i class="fa fa-calendar"></i></label>                    </div>                </div>',_contentOfertas+=codpromo?'                <div class="col-lg-3 col-sm-6 col-xs-12 codigoPromo">                    <div class="close_block">                       <span class="codpromo">'+codpromo+'</span>                        <div>                            <input id="id_codpromo" class="input-codpromo-modal"                                   name="codpromo" placeholder="'+codpromo_txt+'">                        </div>                    </div>                </div>                <div class="col-lg-3 col-sm-6 col-xs-12 btn_cont">':'                <div class="col-lg-4 col-sm-12 col-xs-12 btn_cont">',_contentOfertas+='                    <button class="boton btn btn-motor btn-oferta" title="'+btnDispo+'">'+btnDispo+'</button>                </div>                <div class="clear"></div>            </div>        </div>    </div></div>',_modal_fechas=$("<div />").addClass("modal fade modal_vcenter").attr("id",_opciones.id_modal).append(_contentOfertas).appendTo("body"),$(_modal_fechas).modal()}function mostrar_ventan(boton,codOferta,codHotel,nombreHotel){$(_modal_fechas).find(".btn_cont button").click(function(){var entrada=$("."+_opciones.class_entrada_input).val(),salida=$("."+_opciones.class_salida_input).val(),codpromo="",$codPromoInput=$("."+_opciones.class_codpromo_input);if($codPromoInput&&(codpromo=$codPromoInput.val()),$(boton).data("paquete")){var fe=str2date(entrada),fs=str2date(salida),fecha_e=fe.getFullYear()+"-"+("0"+(fe.getMonth()+1)).slice(-2)+"-"+("0"+fe.getDate()).slice(-2),fecha_s=fs.getFullYear()+"-"+("0"+(fs.getMonth()+1)).slice(-2)+"-"+("0"+fs.getDate()).slice(-2),url_paquete=$(boton).data("url")+"&fe="+fecha_e+"&fs="+fecha_s;window.location.replace(url_paquete)}else""!==entrada&&""!==salida&&$("#"+_opciones.id_form).bc_motorform("buscar_en_fecha",{entrada:entrada,salida:salida,cod_oferta:codOferta,cod_destino:codHotel,desc_destino:nombreHotel,codpromo:codpromo})}),$(_modal_fechas).on("hidden.bs.modal",function(e){$(_modal_fechas).remove()})}function calendarios(boton){var minimo_noches=$(boton).data("minimo-noches");void 0!==minimo_noches&&""!==minimo_noches||(minimo_noches=1);var lastminute=$(boton).data("lastminute"),mindate=$(boton).data("desde"),maxdate=$(boton).data("hasta");lastminute&&(maxdate=mindate);var new_date=mindate.split("/");mindate=new Date(new_date[2],new_date[1]-1,new_date[0]);if(_opciones.entrada_min){dateText=_opciones.entrada_min.split("/");var fecha_ent=new Date(dateText[2],dateText[1]-1,dateText[0]);if(mindate.getTime()<fecha_ent.getTime())mindate=fecha_ent}if($(_modal_fechas).find("."+_opciones.class_entrada_input).datepicker({dateFormat:"dd/mm/yy",firstDay:1,minDate:mindate,maxDate:maxdate,onSelect:function(dateText,inst){$(_modal_fechas).find("."+_opciones.class_salida_input).datepicker("option","minDate",sumar_noches($(this).datepicker("getDate"),minimo_noches))},onClose:function(){setTimeout(function(){$(_modal_fechas).find("."+_opciones.class_salida_input).datepicker("show")},0)}}),lastminute)maxdate=$(boton).data("hasta");$(_modal_fechas).find("."+_opciones.class_salida_input).datepicker({dateFormat:"dd/mm/yy",firstDay:1,minDate:mindate,maxDate:maxdate});var desde=str2date($(boton).data("desde"));$(_modal_fechas).find("."+_opciones.class_entrada_input).datepicker("setDate",desde);var hasta=sumar_noches(str2date($(boton).data("desde")),minimo_noches);$(_modal_fechas).find("."+_opciones.class_salida_input).datepicker("setDate",hasta)}function str2date(f){var fs=f.split("/");return new Date(parseInt(fs[2],10),parseInt(fs[1],10)-1,parseInt(fs[0],10))}function sumar_noches(fecha,noches){for(var cont=1;cont<=noches&&cont<365;)fecha.setTime(fecha.getTime()+864e5),1==fecha.getHours()?fecha.setTime(fecha.getTime()-36e5):23==fecha.getHours()&&fecha.setTime(fecha.getTime()+36e5),cont++;return fecha}_opciones=jQuery.extend(_opciones_default,opciones),init()}}(jQuery);
//# sourceMappingURL=jquery.individual.min.js.map